<!doctype html>
<html lang="bg">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>–í–∞–ª–µ–Ω—Ç–∏–Ω–∫–∞ üíò</title>
  <style>
    :root { --bg1:#ff7aa2; --bg2:#ffd1dc; }
    body{
      margin:0; min-height:100vh; display:grid; place-items:center;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: radial-gradient(circle at 20% 20%, var(--bg2), var(--bg1));
      overflow:hidden;
    }
    .card{
      width:min(520px, 92vw);
      background: rgba(255,255,255,0.92);
      border-radius: 22px;
      padding: 26px 22px;
      box-shadow: 0 18px 40px rgba(0,0,0,.18);
      position:relative;
      text-align:center;
    }
    h1{ margin: 6px 0 10px; font-size: 28px; }
    p{ margin: 0 0 18px; font-size: 18px; line-height:1.35; }
    .btns{
      position:relative;
      height: 90px;
      display:flex;
      justify-content:center;
      gap: 14px;
      align-items:center;
      user-select:none;
    }
    button{
      border:0;
      border-radius: 14px;
      padding: 12px 18px;
      font-size: 18px;
      cursor:pointer;
      box-shadow: 0 10px 22px rgba(0,0,0,.12);
      transition: transform .08s ease;
      touch-action: manipulation;
    }
    button:active{ transform: scale(0.98); }
    #yes{ background:#ff3b7a; color:white; }
    #no{
      background:#f2f2f2;
      position:absolute; /* –∑–∞ –¥–∞ –º–æ–∂–µ –¥–∞ ‚Äú–±—è–≥–∞‚Äù */
      left: 52%;
      top: 50%;
      transform: translate(-50%,-50%);
    }
    .valentine{
      display:none;
      margin-top: 14px;
      padding: 16px 14px;
      border-radius: 18px;
      background: #fff0f5;
      border: 1px solid rgba(255,59,122,.25);
      text-align:left;
    }
    .hearts{
      position:absolute; inset:0; pointer-events:none;
    }
    .heart{
      position:absolute;
      font-size: 22px;
      animation: floatUp 1.4s ease-in forwards;
      opacity: .95;
      filter: drop-shadow(0 6px 10px rgba(0,0,0,.14));
    }
    @keyframes floatUp{
      from{ transform: translateY(0) scale(.9); opacity: .95; }
      to{ transform: translateY(-160px) scale(1.25); opacity: 0; }
    }
  </style>
</head>
<body>
  <div class="card" id="card">
    <div class="hearts" id="hearts"></div>

    <h1>–ò–º–∞—à –ª–∏ —Å—Ä–µ—â–∞ —Å –º–µ–Ω –∑–∞ –°–≤–µ—Ç–∏ –í–∞–ª–µ–Ω—Ç–∏–Ω? üíò</h1>
    <p>–ò–∑–±–µ—Ä–∏ –≤–Ω–∏–º–∞—Ç–µ–ª–Ω–æ üòÑ</p>

    <div class="btns" id="btnArea">
      <button id="yes">–î–∞ üíñ</button>
      <button id="no">–ù–µ üôÉ</button>
    </div>

    <div class="valentine" id="valentine">
      <h2 style="margin:0 0 8px;">–ô–µ–π! ü•∞</h2>
      <p style="margin:0 0 10px;">
        –û—Ñ–∏—Ü–∏–∞–ª–Ω–æ —Å–∏ –º–æ—è—Ç–∞ –≤–∞–ª–µ–Ω—Ç–∏–Ω–∫–∞! üíå<br/>
        –ö–æ–≥–∞ –∏–∑–ª–∏–∑–∞–º–µ? üòä
      </p>
      <div style="display:flex; gap:10px; flex-wrap:wrap;">
        <button id="copyLink" style="background:#ffffff;border:1px solid #ffd1dc;">–ö–æ–ø–∏—Ä–∞–π –ª–∏–Ω–∫ üîó</button>
        <button id="mail" style="background:#ffffff;border:1px solid #ffd1dc;">–û—Ç–≤–æ—Ä–∏ Gmail ‚úâÔ∏è</button>
      </div>
      <small style="display:block;margin-top:10px;opacity:.75;">
        (–ó–∞ –¥–∞ —Ä–∞–±–æ—Ç–∏ ‚Äú–ª–∏–Ω–∫—ä—Ç‚Äù, –∫–∞—á–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ç–∞ –æ–Ω–ª–∞–π–Ω ‚Äì –≤–∏–∂ —Å—Ç—ä–ø–∫–∏—Ç–µ –ø–æ-–¥–æ–ª—É.)
      </small>
    </div>
  </div>

  <script>
    const noBtn = document.getElementById('no');
    const yesBtn = document.getElementById('yes');
    const area  = document.getElementById('btnArea');
    const val   = document.getElementById('valentine');
    const hearts = document.getElementById('hearts');
    const copyLink = document.getElementById('copyLink');
    const mailBtn = document.getElementById('mail');

    function rand(min, max){ return Math.random()*(max-min)+min; }

    function moveNoButton(){
      const rect = area.getBoundingClientRect();
      const btn  = noBtn.getBoundingClientRect();

      // –≥—Ä–∞–Ω–∏—Ü–∏, —Ç–∞–∫–∞ —á–µ –±—É—Ç–æ–Ω—ä—Ç –¥–∞ –æ—Å—Ç–∞–≤–∞ –≤—ä—Ç—Ä–µ –≤ –∑–æ–Ω–∞—Ç–∞
      const padding = 6;
      const maxX = rect.width  - btn.width  - padding;
      const maxY = rect.height - btn.height - padding;

      const x = rand(padding, Math.max(padding, maxX));
      const y = rand(padding, Math.max(padding, maxY));

      noBtn.style.left = x + "px";
      noBtn.style.top  = y + "px";
      noBtn.style.transform = "translate(0,0)";
    }

    // ‚Äú–ë—è–≥–∞‚Äù –ø—Ä–∏ –ø—Ä–∏–±–ª–∏–∂–∞–≤–∞–Ω–µ —Å –º–∏—à–∫–∞ –∏ –ø—Ä–∏ –æ–ø–∏—Ç –∑–∞ –Ω–∞—Ç–∏—Å–∫–∞–Ω–µ
    noBtn.addEventListener('mouseenter', moveNoButton);
    noBtn.addEventListener('pointerdown', (e) => { e.preventDefault(); moveNoButton(); });

    // –ó–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∏: –∞–∫–æ –¥–æ–∫–æ—Å–Ω–µ—à –∑–æ–Ω–∞—Ç–∞ –æ–∫–æ–ª–æ –Ω–µ–≥–æ, –ø–∞–∫ –¥–∞ –±—è–≥–∞
    area.addEventListener('pointermove', (e) => {
      const b = noBtn.getBoundingClientRect();
      const dx = Math.abs(e.clientX - (b.left + b.width/2));
      const dy = Math.abs(e.clientY - (b.top  + b.height/2));
      if (dx < 70 && dy < 50) moveNoButton();
    });

    function popHearts(count=14){
      const card = document.getElementById('card').getBoundingClientRect();
      for(let i=0;i<count;i++){
        const el = document.createElement('div');
        el.className = 'heart';
        el.textContent = ['üíñ','üíò','üíù','üíï','üíó'][Math.floor(Math.random()*5)];
        el.style.left = rand(30, card.width-30) + "px";
        el.style.top  = rand(card.height*0.45, card.height*0.75) + "px";
        el.style.animationDuration = rand(1.1, 1.8) + "s";
        hearts.appendChild(el);
        setTimeout(()=> el.remove(), 1800);
      }
    }

    yesBtn.addEventListener('click', () => {
      popHearts();
      val.style.display = 'block';
      // —Å–ø–∏—Ä–∞ ‚Äú–ù–µ‚Äù-—Ç–æ –¥–∞ –ø—Ä–µ—á–∏ —Å–ª–µ–¥ ‚Äú–î–∞‚Äù
      noBtn.style.display = 'none';
      area.style.height = 'auto';
    });

    copyLink.addEventListener('click', async () => {
      const url = location.href;
      try{
        await navigator.clipboard.writeText(url);
        copyLink.textContent = "–ö–æ–ø–∏—Ä–∞–Ω–æ ‚úÖ";
        setTimeout(()=> copyLink.textContent="–ö–æ–ø–∏—Ä–∞–π –ª–∏–Ω–∫ üîó", 1400);
      }catch{
        alert("–ù–µ —É—Å–ø—è—Ö –¥–∞ –∫–æ–ø–∏—Ä–∞–º. –ï—Ç–æ –ª–∏–Ω–∫–∞:\n" + url);
      }
    });

    mailBtn.addEventListener('click', () => {
      const subject = encodeURIComponent("–í–∞–ª–µ–Ω—Ç–∏–Ω–∫–∞ –∑–∞ —Ç–µ–± üíò");
      const body = encodeURIComponent("–¶—ä–∫–Ω–∏ —Ç—É–∫ üòÑ\n\n" + location.href);
      // mailto –æ—Ç–≤–∞—Ä—è –ø–æ –ø–æ–¥—Ä–∞–∑–±–∏—Ä–∞–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞ (Gmail –∞–∫–æ —Ç–∏ –µ default / –∏–Ω–∞—á–µ –±—Ä–∞—É–∑—ä—Ä)
      window.location.href = `mailto:?subject=${subject}&body=${body}`;
    });

    // –ø—ä—Ä–≤–æ–Ω–∞—á–∞–ª–Ω–æ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–∞–Ω–µ –Ω–∞ "–ù–µ"
    // (–∑–∞ –¥–∞ —Ä–∞–±–æ—Ç–∏ —Å absolute –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ –≤—ä—Ç—Ä–µ –≤ area)
    const r = area.getBoundingClientRect();
    noBtn.style.left = (r.width*0.62) + "px";
    noBtn.style.top  = (r.height*0.18) + "px";
    noBtn.style.transform = "translate(0,0)";
  </script>
</body>
</html>
